{% extends "base.html" %}
{% block content %}
<section class="section" style="
  background: url('/static/img/stars-bg.jpg') center center / cover no-repeat;
  min-height: 100vh;
  padding: 3rem;
">
  <h1 class="title has-text-warning has-text-centered" style="font-size: 6rem;">üîé Resultados para ‚Äú{{ q }}‚Äù</h1>

  {% if mensaje %}
    <div class="notification is-warning has-text-centered is-size-4" style="margin-top: 2rem;">
      ‚ö†Ô∏è {{ mensaje }}
    </div>
  {% endif %}

  {% if peliculas %}
    <h2 class="title has-text-warning">Pel√≠culas</h2>
    <div class="columns is-multiline">
      {% for pelicula in peliculas %}
        <div class="column is-one-sixth">
          <a href="/peliculas/{{ pelicula.id }}">
            <div class="pelicula-card">
              <div class="pelicula-card-image">
                {% if pelicula.imagen_data %}
                  <img src="data:image/png;base64,{{ pelicula.imagen_data | b64encode }}" alt="{{ pelicula.titulo }}">
                {% elif pelicula.imagen_url %}
                  <img src="{{ pelicula.imagen_url }}" alt="{{ pelicula.titulo }}">
                {% else %}
                  <div class="placeholder"><span class="placeholder-text">SIN IMAGEN</span></div>
                {% endif %}
                <div class="pelicula-overlay">
                  <h2 class="pelicula-titulo">{{ pelicula.titulo }}</h2>
                  <p class="has-text-white is-size-6">{{ pelicula.a√±o or "No especificado" }}</p>
                </div>
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if personajes %}
    <h2 class="title has-text-warning">Personajes</h2>
    <div class="columns is-multiline">
      {% for personaje in personajes %}
        <div class="column is-one-sixth">
          <a href="/personajes/{{ personaje.nombre }}">
            <div class="personaje-card">
              <div class="personaje-card-image">
                {% if personaje.imagen_data %}
                  <img src="data:image/png;base64,{{ personaje.imagen_data | b64encode }}" alt="{{ personaje.nombre }}">
                {% elif personaje.imagen_url %}
                  <img src="{{ personaje.imagen_url }}" alt="{{ personaje.nombre }}">
                {% else %}
                  <div class="placeholder"><span class="placeholder-text">SIN IMAGEN</span></div>
                {% endif %}
                <div class="personaje-overlay">
                  <h2 class="personaje-nombre">{{ personaje.nombre }}</h2>
                  <p class="has-text-white is-size-6">{{ "Activo" if personaje.estado else "Inactivo" }}</p>
                </div>
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if directores %}
    <h2 class="title has-text-warning">Directores</h2>
    <div class="columns is-multiline">
      {% for director in directores %}
        <div class="column is-one-sixth">
          <a href="/directores/{{ director.nombre }}">
            <div class="director-card">
              <div class="director-card-image">
                {% if director.imagen_data %}
                  <img src="data:image/png;base64,{{ director.imagen_data | b64encode }}" alt="{{ director.nombre }}">
                {% elif director.imagen_url %}
                  <img src="{{ director.imagen_url }}" alt="{{ director.nombre }}">
                {% else %}
                  <div class="placeholder"><span class="placeholder-text">SIN IMAGEN</span></div>
                {% endif %}
                <div class="director-overlay">
                  <h2 class="director-nombre">{{ director.nombre }}</h2>
                  <p class="has-text-white is-size-6">{{ "Activo" if director.estado else "Inactivo" }}</p>
                </div>
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if curiosidades %}
    <h2 class="title has-text-warning">Curiosidades</h2>
    <div class="columns is-multiline">
      {% for curiosidad in curiosidades %}
        <div class="column is-one-sixth">
          <a href="/curiosidades/{{ curiosidad.pelicula_id }}">
            <div class="curiosidad-card">
              <div class="curiosidad-card-image">
                {% if curiosidad.pelicula and curiosidad.pelicula.imagen_data %}
                  <img src="data:image/png;base64,{{ curiosidad.pelicula.imagen_data | b64encode }}" alt="Curiosidad">
                {% elif curiosidad.pelicula and curiosidad.pelicula.imagen_url %}
                  <img src="{{ curiosidad.pelicula.imagen_url }}" alt="Curiosidad">
                {% else %}
                  <div class="placeholder"><span class="placeholder-text">SIN IMAGEN</span></div>
                {% endif %}
                <div class="curiosidad-overlay">
                  <h2 class="curiosidad-titulo">{{ curiosidad.pelicula.titulo }}</h2>
                </div>
              </div>
              <div class="box has-text-centered" style="margin-top:1rem; background:rgba(0,0,0,0.7); border:3px solid #e62429;">
                <p class="is-size-4 has-text-white">{{ curiosidad.contenido }}</p>
                <p class="is-size-6 has-text-warning">{{ "Activa" if curiosidad.estado else "Eliminada" }}</p>
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</section>
{% endblock %}