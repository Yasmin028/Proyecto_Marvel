{% extends 'base.html' %}

{% block content %}
<section class="section bg-estelar">
  <div class="container">
    <h1 class="title has-text-warning has-text-centered" style="font-size: 8rem;">‚ú® Curiosidades</h1>

    {# üîπ Formulario solo visible en /docs #}
    {% if request.url.path == "/docs" %}
      <form method="post" action="/curiosidades">
        <div class="field">
          <label class="label">TEXTO DE LA CURIOSIDAD</label>
          <div class="control">
            <input class="input" type="text" name="contenido" required>
          </div>
        </div>
        <div class="field">
          <label class="label">NOMBRE DE LA PEL√çCULA</label>
          <div class="control">
            <input class="input" type="text" name="pelicula_id" required>
          </div>
        </div>
        <div class="control">
          <button class="button is-warning">Agregar Curiosidad</button>
        </div>
      </form>
    {% endif %}

    {# üîπ Listado de curiosidades como tarjetas #}
    {% if curiosidades %}
      <h2 class="title has-text-warning">Listado de Curiosidades</h2>
      <div class="columns is-multiline">

        {% for curiosidad in curiosidades %}
  <div class="column is-one-third">
    <div class="curiosidad-card">
      <div class="curiosidad-card-image">
        {% if curiosidad.pelicula and curiosidad.pelicula.imagen_url %}
          <img src="{{ curiosidad.pelicula.imagen_url }}" alt="{{ curiosidad.pelicula.titulo }}">
        {% else %}
          <div class="placeholder"><span class="placeholder-text">SIN IMAGEN</span></div>
        {% endif %}
      </div>
      <div class="has-text-centered mt-2">
        <a href="/curiosidades/{{ curiosidad.id }}/page">
          {{ curiosidad.pelicula.titulo if curiosidad.pelicula else "Sin t√≠tulo" }}
        </a>
      </div>
    </div>
  </div>
{% endfor %}

      </div>

    {% else %}
      <p class="has-text-centered has-text-grey is-size-4">No hay curiosidades registradas a√∫n.</p>
    {% endif %}

  </div>
</section>
{% endblock %}